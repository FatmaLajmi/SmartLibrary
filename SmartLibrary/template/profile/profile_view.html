{% extends 'base.html' %}
{% load static %}

{% block title %}Mon profil - SmartLibrary{% endblock %}

{% block content %}

<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&family=Prata&display=swap" rel="stylesheet">

<style>
    body { background:#F3F2EC; font-family:'Raleway'; }

    .view-container {
        max-width:800px;
        margin:50px auto;
        background:#fff;
        padding:40px;
        border-radius:4px;
        box-shadow:0 8px 32px rgba(31,38,135,0.15);
    }

    .header {
        display:flex;
        justify-content:space-between;
        align-items:center;
        margin-bottom:25px;
    }

    h2 {
        font-family:'Prata';
        font-size:2rem;
        color:#2f2f2f;
    }

    .btn {
        background:#C5A992;
        color:white;
        padding:10px 18px;
        border-radius:4px;
        font-size:.9rem;
        text-decoration:none;
        font-weight:600;
        transition:.3s;
    }
    .btn:hover { background:#2f2f2f; }

    .profile-photo {
        text-align:center;
        margin-bottom:30px;
    }

    .profile-photo img {
        width:150px; height:150px;
        border-radius:50%;
        object-fit:cover;
        border:4px solid #C5A992;
    }

    .info-block {
        background:#FAFAFA;
        border:1px solid #E0E0E0;
        padding:18px;
        border-radius:4px;
        margin-bottom:15px;
    }

    .info-label {
        font-size:.85rem;
        font-weight:600;
        color:#757575;
        margin-bottom:4px;
    }

    .info-value {
        font-size:1.05rem;
        color:#2f2f2f;
    }

</style>

<div class="view-container">

    <div class="header">
        <h2>Mon profil</h2>
        <div>
            <a href="{% url 'profile_edit' %}" class="btn">Modifier</a>
            <a href="{% url 'index' %}" class="btn" style="background:#757575;">home</a>
        </div>
    </div>

    <div class="profile-photo">
            {% if image_data %}
            <img src="data:image/jpeg;base64,{{ image_data }}" alt="Photo">
            {% else %}
            <img src="{% static 'default-avatar.png' %}" alt="Profile">
            {% endif %}
    </div>

    <div class="info-block">
        <div class="info-label">Nom complet</div>
        <div class="info-value">{{ profile.user.first_name }} {{ profile.user.last_name }}</div>
    </div>

    <div class="info-block">
        <div class="info-label">Email</div>
        <div class="info-value">{{ profile.user.email }}</div>
    </div>

    <div class="info-block">
        <div class="info-label">Adresse</div>
        <div class="info-value">{{ profile.address|default:"Non renseignée" }}</div>
    </div>

    <div class="info-block">
        <div class="info-label">Téléphone</div>
        <div class="info-value">{{ profile.phone_number|default:"Non renseigné" }}</div>
    </div>

    <div class="info-block">
        <div class="info-label">Carte bancaire</div>
        <div class="info-value">**** **** **** {{ profile.bank_card_number|slice:"-4:" }}</div>
    </div>
</div>

{% endblock %}
